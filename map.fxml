<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.web.WebView?>

<BorderPane xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml"
            fx:controller="dronefleet.MapController" 
            prefWidth="1200" prefHeight="800"
            stylesheets="@style.css">

    <!-- HEADER -->
    <top>
        <HBox spacing="20" styleClass="card" alignment="CENTER_LEFT">
            <padding><Insets top="15" right="20" bottom="15" left="20"/></padding>
            
            <VBox>
                <Label text="ðŸ—ºï¸ Mission Control Center" styleClass="h1"/>
                <Label fx:id="statusLabel" text="SelecteazÄƒ 2 puncte pe hartÄƒ pentru a planifica misiunea" 
                       styleClass="label-dim"/>
            </VBox>
            
            <Pane HBox.hgrow="ALWAYS"/>
            
            <!-- Info Meteo -->
            <VBox spacing="3" alignment="CENTER" 
                  style="-fx-background-color: #ecf0f1; -fx-padding: 10; -fx-background-radius: 6; -fx-border-color: #bdc3c7; -fx-border-radius: 6; -fx-border-width: 1;">
                <Label text="METEO DESTINAÈšIE" style="-fx-font-size:9; -fx-font-weight:bold; -fx-text-fill:#7f8c8d;"/>
                <Label fx:id="weatherLabel" text="-- Â°C" 
                       style="-fx-font-size:16; -fx-font-weight:bold; -fx-text-fill:#2c3e50;"/>
                <Label fx:id="windLabel" text="VÃ¢nt: -- km/h" 
                       style="-fx-font-size:10; -fx-text-fill:#7f8c8d;"/>
            </VBox>
        </HBox>
    </top>

    <!-- CONÈšINUT PRINCIPAL -->
    <center>
        <SplitPane dividerPositions="0.25" style="-fx-background-color:transparent; -fx-padding: 10;">
            <items>
                <!-- SIDEBAR STÃ‚NGA - LOCAÈšII & CONFIGURARE -->
                <VBox spacing="15" styleClass="card" style="-fx-min-width: 280;">
                    <Label text="âš™ï¸ Configurare Misiune" styleClass="h2"/>
                    
                    <!-- Tip Misiune -->
                    <VBox spacing="5">
                        <Label text="Tip Misiune:" style="-fx-font-weight:bold; -fx-font-size:11;"/>
                        <ComboBox fx:id="missionTypeCombo" prefWidth="250" 
                                  style="-fx-font-size:12;"/>
                    </VBox>

                    <!-- Greutate (doar pentru Livrare) -->
                    <VBox fx:id="weightContainer" spacing="5">
                        <Label text="Greutate Colet (kg):" style="-fx-font-weight:bold; -fx-font-size:11;"/>
                        <TextField fx:id="weightField" text="1.5" 
                                   promptText="ex: 2.5"
                                   style="-fx-font-size:12;"/>
                    </VBox>

                    <Separator/>

                    <!-- Instructiuni -->
                    <VBox spacing="3" 
                          style="-fx-background-color: #fff3cd; -fx-padding: 10; -fx-background-radius: 5; -fx-border-color: #ffc107; -fx-border-radius: 5;">
                        <Label text="ðŸ’¡ Cum funcÈ›ioneazÄƒ:" 
                               style="-fx-font-weight:bold; -fx-font-size:10;"/>
                        <Label text="1. Click pe hartÄƒ = Punct START (verde)" 
                               style="-fx-font-size:9; -fx-text-fill:#856404;" wrapText="true"/>
                        <Label text="2. Click 2 = Punct DESTINAÈšIE (roÈ™u)" 
                               style="-fx-font-size:9; -fx-text-fill:#856404;" wrapText="true"/>
                        <Label text="3. Sistemul calculeazÄƒ automat" 
                               style="-fx-font-size:9; -fx-text-fill:#856404;" wrapText="true"/>
                    </VBox>
                </VBox>

                <!-- HARTA INTERACTIVÄ‚ -->
                <StackPane styleClass="card" style="-fx-padding: 5;">
                    <WebView fx:id="webView"/>
                </StackPane>
            </items>
        </SplitPane>
    </center>

    <!-- BOTTOM BAR - REZULTATE & CONFIRMARE -->
    <bottom>
        <HBox spacing="25" styleClass="sidebar" alignment="CENTER_RIGHT">
            <padding><Insets top="18" right="30" bottom="18" left="30"/></padding>
            
            <!-- Card DronÄƒ AlocatÄƒ -->
            <VBox fx:id="resultCard" visible="false" spacing="3" alignment="CENTER_LEFT" 
                  style="-fx-padding: 0 25 0 0;">
                <Label text="ðŸš DRONÄ‚ ALOCATÄ‚" 
                       style="-fx-text-fill:#bdc3c7; -fx-font-size:9; -fx-font-weight:bold;"/>
                <Label fx:id="droneLabel" text="-" 
                       style="-fx-text-fill:#2ecc71; -fx-font-weight:bold; -fx-font-size:13;"/>
            </VBox>

            <!-- DistanÈ›Äƒ -->
            <VBox alignment="CENTER_LEFT" spacing="2">
                <Label text="DISTANÈšÄ‚" 
                       style="-fx-text-fill:#bdc3c7; -fx-font-size:9; -fx-font-weight:bold;"/>
                <Label fx:id="distanceLabel" text="0.0 km" 
                       style="-fx-text-fill:white; -fx-font-size:18; -fx-font-weight:bold;"/>
            </VBox>
            
            <Separator orientation="VERTICAL" style="-fx-background-color:#7f8c8d;"/>
            
            <!-- Cost Estimat -->
            <VBox alignment="CENTER_LEFT" spacing="2">
                <Label text="COST ESTIMAT" 
                       style="-fx-text-fill:#bdc3c7; -fx-font-size:9; -fx-font-weight:bold;"/>
                <Label fx:id="costLabel" text="0.00 RON" 
                       style="-fx-text-fill:#f1c40f; -fx-font-size:22; -fx-font-weight:bold;"/>
            </VBox>
            
            <Region prefWidth="30"/>
            
            <!-- Buton Confirmare -->
            <Button fx:id="confirmButton" 
                    text="âœˆï¸ TRIMITE DRONA" 
                    onAction="#confirmMission"
                    styleClass="button-success" 
                    disable="true"
                    style="-fx-font-size:14; -fx-padding: 15 30; -fx-font-weight:bold;"/>
        </HBox>
    </bottom>
</BorderPane>